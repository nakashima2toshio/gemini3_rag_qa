# a01_load_non_qa_rag_data.py - æŠ€è¡“ä»•æ§˜æ›¸

## ç›®æ¬¡

1. [æ¦‚è¦](#1-æ¦‚è¦)
2. [ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£](#2-ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£)
3. [ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆè¨­å®š](#3-ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆè¨­å®š)
4. [ãƒ‡ãƒ¼ã‚¿æ¤œè¨¼æ©Ÿèƒ½](#4-ãƒ‡ãƒ¼ã‚¿æ¤œè¨¼æ©Ÿèƒ½)
5. [Livedoorã‚³ãƒ¼ãƒ‘ã‚¹å‡¦ç†](#5-livedoorã‚³ãƒ¼ãƒ‘ã‚¹å‡¦ç†)
6. [ãƒ‡ãƒ¼ã‚¿å‡¦ç†](#6-ãƒ‡ãƒ¼ã‚¿å‡¦ç†)
7. [ä½¿ç”¨æ–¹æ³•](#7-ä½¿ç”¨æ–¹æ³•)
8. [å‡ºåŠ›ãƒ»ä¿å­˜](#8-å‡ºåŠ›ä¿å­˜)
9. [ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°](#9-ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°)
10. [æ‹¡å¼µå€™è£œãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆ](#10-æ‹¡å¼µå€™è£œãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆ)

---

## 1. æ¦‚è¦

### 1.1 ç›®çš„

éQ&Aå‹ã®RAGãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‚’Hugging Faceã‚„å¤–éƒ¨ã‚½ãƒ¼ã‚¹ã‹ã‚‰ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã€å‰å‡¦ç†ãƒ»æ¤œè¨¼ã‚’è¡Œã†Streamlitãƒ™ãƒ¼ã‚¹ã®Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã€‚

### 1.2 èµ·å‹•ã‚³ãƒãƒ³ãƒ‰

```bash
streamlit run a01_load_non_qa_rag_data.py --server.port=8502
```

### 1.3 ä¸»è¦æ©Ÿèƒ½

- âœ… **æ—¥æœ¬èªãƒ»è‹±èªãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã®å‡¦ç†**
- âœ… **ãƒ‡ãƒ¼ã‚¿æ¤œè¨¼ãƒ»å“è³ªãƒã‚§ãƒƒã‚¯**
- âœ… **RAGç”¨ãƒ†ã‚­ã‚¹ãƒˆæŠ½å‡ºãƒ»å‰å‡¦ç†**
- âœ… **ãƒˆãƒ¼ã‚¯ãƒ³ä½¿ç”¨é‡æ¨å®š**
- âœ… **CSV/TXT/JSONå½¢å¼å‡ºåŠ›**
- âœ… **HuggingFaceè‡ªå‹•ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãƒ»ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°å¯¾å¿œ**

### 1.4 å¯¾å¿œãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆï¼ˆå‹•ä½œç¢ºèªæ¸ˆã¿ï¼‰

| ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆ | ã‚¢ã‚¤ã‚³ãƒ³ | è¨€èª | å†…å®¹ | ä»¶æ•° |
|------------|--------|------|------|------|
| Wikipediaæ—¥æœ¬èªç‰ˆ | ğŸ“š | æ—¥æœ¬èª | ç™¾ç§‘äº‹å…¸çš„çŸ¥è­˜ | ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚° |
| CC100æ—¥æœ¬èª | ğŸ“° | æ—¥æœ¬èª | Webãƒ†ã‚­ã‚¹ãƒˆã‚³ãƒ¼ãƒ‘ã‚¹ | ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚° |
| CC-News | ğŸŒ | è‹±èª | ãƒ‹ãƒ¥ãƒ¼ã‚¹è¨˜äº‹ | 7,376ä»¶ |
| Livedoorãƒ‹ãƒ¥ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‘ã‚¹ | ğŸ“° | æ—¥æœ¬èª | ãƒ‹ãƒ¥ãƒ¼ã‚¹ï¼ˆ9ã‚«ãƒ†ã‚´ãƒªï¼‰ | 7,376ä»¶ |

---

## 2. ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### 2.1 ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆå›³

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Streamlit WebUI                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Sidebar              â”‚  Main Content Area                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆ    â”‚ â”‚  â”‚ Tab1: ãƒ‡ãƒ¼ã‚¿ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰         â”‚ â”‚
â”‚  â”‚ ã‚¿ã‚¤ãƒ—é¸æŠ      â”‚ â”‚  â”‚  - ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰          â”‚ â”‚
â”‚  â”‚                 â”‚ â”‚  â”‚  - HuggingFaceè‡ªå‹•ãƒ­ãƒ¼ãƒ‰         â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚ ãƒ¢ãƒ‡ãƒ«é¸æŠ      â”‚ â”‚  â”‚ Tab2: ãƒ‡ãƒ¼ã‚¿æ¤œè¨¼                 â”‚ â”‚
â”‚  â”‚                 â”‚ â”‚  â”‚  - åŸºæœ¬æ¤œè¨¼                      â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚  â”‚  - ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆå›ºæœ‰æ¤œè¨¼          â”‚ â”‚
â”‚  â”‚ ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆ    â”‚ â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚ å›ºæœ‰è¨­å®š        â”‚ â”‚  â”‚ Tab3: å‰å‡¦ç†å®Ÿè¡Œ                 â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚  - ãƒ†ã‚­ã‚¹ãƒˆæŠ½å‡ºãƒ»ã‚¯ãƒ¬ãƒ³ã‚¸ãƒ³ã‚°    â”‚ â”‚
â”‚                       â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚                       â”‚  â”‚ Tab4: çµæœãƒ»ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰         â”‚ â”‚
â”‚                       â”‚  â”‚  - çµ±è¨ˆæƒ…å ±ãƒ»CSV/TXT/JSONå‡ºåŠ›    â”‚ â”‚
â”‚                       â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    helper_rag.py                             â”‚
â”‚  - select_model()           - validate_data()                â”‚
â”‚  - show_model_info()        - estimate_token_usage()         â”‚
â”‚  - clean_text()             - save_files_to_output()         â”‚
â”‚  - safe_execute()                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               External Data Sources                          â”‚
â”‚  - HuggingFace Hub (datasets ãƒ©ã‚¤ãƒ–ãƒ©ãƒª)                     â”‚
â”‚  - Rondhuit (Livedoor tar.gzç›´æ¥ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 ä¸»è¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

| ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ | å½¹å‰² |
|--------------|------|
| `NonQARAGConfig` | ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆè¨­å®šç®¡ç†ã‚¯ãƒ©ã‚¹ |
| `validate_*_specific()` | ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆåˆ¥æ¤œè¨¼é–¢æ•°ç¾¤ |
| `extract_text_content()` | ãƒ†ã‚­ã‚¹ãƒˆæŠ½å‡ºãƒ»çµåˆå‡¦ç† |
| `download_livedoor_corpus()` | Livedoor tar.gzãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ |
| `load_livedoor_corpus()` | Livedoorãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿ |

### 2.3 ä¾å­˜ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ï¼ˆhelper_rag.pyã‹ã‚‰ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆï¼‰

```python
from helper_rag import (
    select_model,           # ãƒ¢ãƒ‡ãƒ«é¸æŠUI
    show_model_info,        # ãƒ¢ãƒ‡ãƒ«æƒ…å ±è¡¨ç¤º
    validate_data,          # åŸºæœ¬ãƒ‡ãƒ¼ã‚¿æ¤œè¨¼
    estimate_token_usage,   # ãƒˆãƒ¼ã‚¯ãƒ³ä½¿ç”¨é‡æ¨å®š
    save_files_to_output,   # OUTPUTä¿å­˜
    clean_text,             # ãƒ†ã‚­ã‚¹ãƒˆã‚¯ãƒ¬ãƒ³ã‚¸ãƒ³ã‚°
    safe_execute            # å®‰å…¨å®Ÿè¡Œãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿
)
```

---

## 3. ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆè¨­å®š

### 3.1 NonQARAGConfigã‚¯ãƒ©ã‚¹

```python
class NonQARAGConfig:
    """éQ&Aå‹RAGãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã®è¨­å®š"""

    DATASET_CONFIGS = {
        "dataset_key": {
            "name": "è¡¨ç¤ºå",
            "icon": "ã‚¢ã‚¤ã‚³ãƒ³",
            "required_columns": ["å¿…é ˆã‚«ãƒ©ãƒ "],
            "description": "èª¬æ˜",
            "hf_dataset": "HuggingFaceãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆå",
            "hf_config": "Configåï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰",
            "split": "train/test/validation",
            "streaming": True/False,
            "text_field": "ãƒ†ã‚­ã‚¹ãƒˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å",
            "title_field": "ã‚¿ã‚¤ãƒˆãƒ«ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰åï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰",
            "sample_size": ã‚µãƒ³ãƒ—ãƒ«æ•°
        }
    }

    @classmethod
    def get_config(cls, dataset_type: str) -> Dict[str, Any]:
        """ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆè¨­å®šã®å–å¾—"""

    @classmethod
    def get_all_datasets(cls) -> List[str]:
        """å…¨ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‚¿ã‚¤ãƒ—ã®ãƒªã‚¹ãƒˆã‚’å–å¾—"""
```

### 3.2 ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆåˆ¥è¨­å®šè©³ç´°

#### Wikipediaæ—¥æœ¬èªç‰ˆ (`wikipedia_ja`)

```python
{
    "name": "Wikipediaæ—¥æœ¬èªç‰ˆ",
    "icon": "ğŸ“š",
    "required_columns": ["title", "text"],
    "description": "Wikipediaæ—¥æœ¬èªç‰ˆã®è¨˜äº‹ãƒ‡ãƒ¼ã‚¿",
    "hf_dataset": "wikimedia/wikipedia",
    "hf_config": "20231101.ja",
    "split": "train",
    "streaming": True,
    "text_field": "text",
    "title_field": "title",
    "sample_size": 1000
}
```

#### CC100æ—¥æœ¬èª (`japanese_text`)

```python
{
    "name": "æ—¥æœ¬èªWebãƒ†ã‚­ã‚¹ãƒˆï¼ˆCC100ï¼‰",
    "icon": "ğŸ“°",
    "required_columns": ["text"],
    "description": "æ—¥æœ¬èªWebãƒ†ã‚­ã‚¹ãƒˆã‚³ãƒ¼ãƒ‘ã‚¹",
    "hf_dataset": "range3/cc100-ja",
    "hf_config": None,
    "split": "train",
    "streaming": True,
    "text_field": "text",
    "title_field": None,
    "sample_size": 1000
}
```

#### CC-News (`cc_news`)

```python
{
    "name": "CC-Newsï¼ˆè‹±èªãƒ‹ãƒ¥ãƒ¼ã‚¹ï¼‰",
    "icon": "ğŸŒ",
    "required_columns": ["title", "text"],
    "description": "Common Crawlè‹±èªãƒ‹ãƒ¥ãƒ¼ã‚¹è¨˜äº‹",
    "hf_dataset": "cc_news",
    "hf_config": None,
    "split": "train",
    "streaming": True,
    "text_field": "text",
    "title_field": "title",
    "sample_size": 500
}
```

#### Livedoorãƒ‹ãƒ¥ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‘ã‚¹ (`livedoor`)

```python
{
    "name": "Livedoorãƒ‹ãƒ¥ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‘ã‚¹",
    "icon": "ğŸ“°",
    "required_columns": ["url", "title", "content", "category"],
    "description": "Livedoorãƒ‹ãƒ¥ãƒ¼ã‚¹æ—¥æœ¬èªè¨˜äº‹ï¼ˆ9ã‚«ãƒ†ã‚´ãƒªï¼‰",
    "hf_dataset": None,  # ç›´æ¥ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
    "download_url": "https://www.rondhuit.com/download/ldcc-20140209.tar.gz",
    "hf_config": None,
    "split": None,
    "streaming": False,
    "text_field": "content",
    "title_field": "title",
    "sample_size": 7376  # å…¨è¨˜äº‹æ•°
}
```

---

## 4. ãƒ‡ãƒ¼ã‚¿æ¤œè¨¼æ©Ÿèƒ½

### 4.1 Wikipediaç‰¹æœ‰ã®æ¤œè¨¼ (`validate_wikipedia_data_specific`)

| æ¤œè¨¼é …ç›® | èª¬æ˜ |
|---------|------|
| å¹³å‡ãƒ†ã‚­ã‚¹ãƒˆé•· | 100æ–‡å­—æœªæº€ã§è­¦å‘Š |
| Wikiãƒãƒ¼ã‚¯ã‚¢ãƒƒãƒ— | `==`, `[[`, `]]`ã®æ¤œå‡ºãƒ»å‰²åˆè¡¨ç¤º |
| ã‚¿ã‚¤ãƒˆãƒ«é‡è¤‡ | é‡è¤‡ä»¶æ•°ã®å ±å‘Š |

### 4.2 ãƒ‹ãƒ¥ãƒ¼ã‚¹ãƒ‡ãƒ¼ã‚¿ç‰¹æœ‰ã®æ¤œè¨¼ (`validate_news_data_specific`)

| æ¤œè¨¼é …ç›® | èª¬æ˜ |
|---------|------|
| å¹³å‡è¨˜äº‹é•· | æ–‡å­—æ•°çµ±è¨ˆ |
| çŸ­ã„è¨˜äº‹æ¤œå‡º | 100æ–‡å­—æœªæº€ã®è¨˜äº‹æ•° |
| ã‚«ãƒ†ã‚´ãƒªåˆ†å¸ƒ | Livedoorã®å ´åˆã€ã‚«ãƒ†ã‚´ãƒªåˆ¥ä»¶æ•° |

### 4.3 å­¦è¡“è«–æ–‡ãƒ‡ãƒ¼ã‚¿ç‰¹æœ‰ã®æ¤œè¨¼ (`validate_scientific_data_specific`)

| æ¤œè¨¼é …ç›® | èª¬æ˜ |
|---------|------|
| å¹³å‡è¦æ—¨é•· | æ–‡å­—æ•°çµ±è¨ˆ |
| å­¦è¡“ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ | research, study, method, resultç­‰ã®æ¤œå‡º |
| åŒ»å­¦ç”¨èª | PubMedã®å ´åˆã€patient, treatmentç­‰ã®æ¤œå‡º |
| æœ¬æ–‡å­˜åœ¨ç¢ºèª | arXivã®å ´åˆã€articleãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ç¢ºèª |

### 4.4 ã‚³ãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿ç‰¹æœ‰ã®æ¤œè¨¼ (`validate_code_data_specific`)

| æ¤œè¨¼é …ç›® | èª¬æ˜ |
|---------|------|
| å¹³å‡ã‚³ãƒ¼ãƒ‰é•· | æ–‡å­—æ•°çµ±è¨ˆ |
| ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆå­˜åœ¨ | func_documentation_stringã®æœ‰ç„¡ |
| ã‚³ãƒ¼ãƒ‰ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ | def, class, import, function, return |

### 4.5 Stack Overflowç‰¹æœ‰ã®æ¤œè¨¼ (`validate_stackoverflow_data_specific`)

| æ¤œè¨¼é …ç›® | èª¬æ˜ |
|---------|------|
| å¹³å‡è³ªå•é•· | æ–‡å­—æ•°çµ±è¨ˆ |
| ã‚¿ã‚°ä»˜ãè³ªå• | ã‚¿ã‚°ä»˜ãå‰²åˆ |
| äººæ°—ã‚¿ã‚°Top5 | ã‚¿ã‚°ã®ã‚«ã‚¦ãƒ³ãƒˆ |
| æŠ€è¡“ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ | python, javascript, java, errorç­‰ |

---

## 5. Livedoorã‚³ãƒ¼ãƒ‘ã‚¹å‡¦ç†

### 5.1 ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰é–¢æ•°

```python
def download_livedoor_corpus(save_dir: str = "datasets") -> str:
    """Livedoorãƒ‹ãƒ¥ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‘ã‚¹ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰

    Args:
        save_dir: ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰å…ˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª

    Returns:
        è§£å‡å…ˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ãƒ‘ã‚¹
    """
```

**å‡¦ç†ãƒ•ãƒ­ãƒ¼**:
1. `datasets/ldcc-20140209.tar.gz`ã«ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
2. `datasets/livedoor/text/`ã«è§£å‡ï¼ˆfilterãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã§ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¯¾ç­–ï¼‰
3. è§£å‡æ¸ˆã¿ã®å ´åˆã¯ã‚¹ã‚­ãƒƒãƒ—

### 5.2 èª­ã¿è¾¼ã¿é–¢æ•°

```python
def load_livedoor_corpus(data_dir: str) -> pd.DataFrame:
    """Livedoorãƒ‹ãƒ¥ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‘ã‚¹ã‚’èª­ã¿è¾¼ã¿

    Args:
        data_dir: Livedoorã‚³ãƒ¼ãƒ‘ã‚¹ã®è§£å‡ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª

    Returns:
        è¨˜äº‹ãƒ‡ãƒ¼ã‚¿ã®DataFrame
    """
```

**ã‚«ãƒ†ã‚´ãƒªä¸€è¦§ï¼ˆ9ç¨®é¡ï¼‰**:
- `dokujo-tsushin` - ç‹¬å¥³é€šä¿¡
- `it-life-hack` - ITãƒ©ã‚¤ãƒ•ãƒãƒƒã‚¯
- `kaden-channel` - å®¶é›»ãƒãƒ£ãƒ³ãƒãƒ«
- `livedoor-homme` - livedoor HOMME
- `movie-enter` - MOVIE ENTER
- `peachy` - Peachy
- `smax` - ã‚¨ã‚¹ãƒãƒƒã‚¯ã‚¹
- `sports-watch` - Sports Watch
- `topic-news` - ãƒˆãƒ”ãƒƒã‚¯ãƒ‹ãƒ¥ãƒ¼ã‚¹

**ãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼**:
```
1è¡Œç›®: URL
2è¡Œç›®: æ—¥ä»˜
3è¡Œç›®: ã‚¿ã‚¤ãƒˆãƒ«
4è¡Œç›®ä»¥é™: æœ¬æ–‡
```

---

## 6. ãƒ‡ãƒ¼ã‚¿å‡¦ç†

### 6.1 ãƒ†ã‚­ã‚¹ãƒˆæŠ½å‡ºé–¢æ•°

```python
@safe_execute
def extract_text_content(df: pd.DataFrame, dataset_type: str) -> pd.DataFrame:
    """ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‹ã‚‰ãƒ†ã‚­ã‚¹ãƒˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’æŠ½å‡º"""
```

**å‡¦ç†ãƒ•ãƒ­ãƒ¼**:
1. è¨­å®šã‹ã‚‰text_fieldã€title_fieldã‚’å–å¾—
2. ã‚¿ã‚¤ãƒˆãƒ«ã¨ãƒ†ã‚­ã‚¹ãƒˆã‚’çµåˆ â†’ `Combined_Text`ã‚«ãƒ©ãƒ 
3. `clean_text()`ã§ã‚¯ãƒ¬ãƒ³ã‚¸ãƒ³ã‚°
4. ç©ºæ–‡å­—åˆ—ã®è¡Œã‚’é™¤å¤–

**ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å‡¦ç†**:
- ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒè¦‹ã¤ã‹ã‚‰ãªã„å ´åˆã€å€™è£œã‚’æ¢ç´¢
- å€™è£œ: `text`, `content`, `body`, `document`, `abstract`, `description`
- ãã‚Œã§ã‚‚è¦‹ã¤ã‹ã‚‰ãªã„å ´åˆã€å…¨ã‚«ãƒ©ãƒ ã‚’çµåˆ

### 6.2 å‰å‡¦ç†ã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼ˆã‚µã‚¤ãƒ‰ãƒãƒ¼ï¼‰

#### Wikipediaæ—¥æœ¬èªç‰ˆ
- Wikiãƒãƒ¼ã‚¯ã‚¢ãƒƒãƒ—é™¤å»ï¼ˆãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ï¼‰
- æœ€å°ãƒ†ã‚­ã‚¹ãƒˆé•·: 200æ–‡å­—ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰

#### CC100æ—¥æœ¬èª
- URLé™¤å»ï¼ˆãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ï¼‰
- æœ€å°ãƒ†ã‚­ã‚¹ãƒˆé•·: 10æ–‡å­—ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰

#### CC-News
- URLé™¤å»ï¼ˆãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ï¼‰
- æœ€å°ãƒ†ã‚­ã‚¹ãƒˆé•·: 100æ–‡å­—ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰

### 6.3 å…±é€šå‰å‡¦ç†ã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼ˆTab3ï¼‰

| ã‚ªãƒ—ã‚·ãƒ§ãƒ³ | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ | èª¬æ˜ |
|-----------|----------|------|
| çŸ­ã„ãƒ†ã‚­ã‚¹ãƒˆã‚’é™¤å¤– | ON | æœ€å°æ–‡å­—æ•°æœªæº€ã‚’é™¤å¤– |
| æœ€å°æ–‡å­—æ•° | 100 | é™¤å¤–åŸºæº– |
| é‡è¤‡ã‚’é™¤å» | ON | å®Œå…¨ä¸€è‡´ãƒ†ã‚­ã‚¹ãƒˆã‚’é™¤å¤– |

---

## 7. ä½¿ç”¨æ–¹æ³•

### 7.1 åŸºæœ¬ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

```
1. ã‚µã‚¤ãƒ‰ãƒãƒ¼ã§ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆé¸æŠ
        â”‚
        â–¼
2. Tab1: ãƒ‡ãƒ¼ã‚¿ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
   â”œâ”€â”€ CSVãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
   â””â”€â”€ ã¾ãŸã¯ HuggingFaceã‹ã‚‰è‡ªå‹•ãƒ­ãƒ¼ãƒ‰
        â”‚
        â–¼
3. Tab2: ãƒ‡ãƒ¼ã‚¿æ¤œè¨¼
   â”œâ”€â”€ åŸºæœ¬æ¤œè¨¼çµæœã‚’ç¢ºèª
   â””â”€â”€ ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆå›ºæœ‰æ¤œè¨¼ã‚’ç¢ºèª
        â”‚
        â–¼
4. Tab3: å‰å‡¦ç†å®Ÿè¡Œ
   â”œâ”€â”€ ã‚ªãƒ—ã‚·ãƒ§ãƒ³è¨­å®š
   â”œâ”€â”€ ã€Œå‰å‡¦ç†ã‚’å®Ÿè¡Œã€ãƒœã‚¿ãƒ³
   â””â”€â”€ ãƒˆãƒ¼ã‚¯ãƒ³ä½¿ç”¨é‡æ¨å®š
        â”‚
        â–¼
5. Tab4: çµæœãƒ»ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
   â”œâ”€â”€ CSV/TXT/JSONãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
   â””â”€â”€ OUTPUTãƒ•ã‚©ãƒ«ãƒ€ã«ä¿å­˜
```

### 7.2 HuggingFaceã‹ã‚‰ã®ãƒ­ãƒ¼ãƒ‰

**æ¨å¥¨è¨­å®šï¼ˆãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆåˆ¥ï¼‰**:

| ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆ | datasetå | Config | ã‚µãƒ³ãƒ—ãƒ«æ•° |
|------------|----------|--------|----------|
| Wikipedia | `wikimedia/wikipedia` | `20231101.ja` | 1000 |
| CC100 | `range3/cc100-ja` | ãªã— | 1000 |
| CC-News | `cc_news` | ãªã— | 500 |
| Livedoor | (è‡ªå‹•ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰) | - | 7376 |

### 7.3 ãƒ‡ãƒ¼ã‚¿ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼

Tab1ã§ãƒ‡ãƒ¼ã‚¿ãƒ­ãƒ¼ãƒ‰å¾Œã«è¡¨ç¤ºã•ã‚Œã‚‹æƒ…å ±:
- ãƒ‡ãƒ¼ã‚¿ä»¶æ•°ãƒ»ã‚«ãƒ©ãƒ æ•°
- å…ˆé ­10ä»¶ã®ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼
- ã‚«ãƒ©ãƒ è©³ç´°ï¼ˆãƒ‡ãƒ¼ã‚¿å‹ã€NULLæ•°ã€ãƒ¦ãƒ‹ãƒ¼ã‚¯æ•°ï¼‰

---

## 8. å‡ºåŠ›ãƒ»ä¿å­˜

### 8.1 ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰å½¢å¼

#### CSVãƒ•ã‚¡ã‚¤ãƒ«
```csv
Combined_Text,title,text,...
"ã‚¿ã‚¤ãƒˆãƒ« ãƒ†ã‚­ã‚¹ãƒˆå†…å®¹...",ã‚¿ã‚¤ãƒˆãƒ«,ãƒ†ã‚­ã‚¹ãƒˆ,...
```

#### TXTãƒ•ã‚¡ã‚¤ãƒ«
```
ã‚¿ã‚¤ãƒˆãƒ« ãƒ†ã‚­ã‚¹ãƒˆå†…å®¹...
ã‚¿ã‚¤ãƒˆãƒ« ãƒ†ã‚­ã‚¹ãƒˆå†…å®¹...
```

#### JSONãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
```json
{
  "dataset_type": "wikipedia_ja",
  "dataset_name": "Wikipediaæ—¥æœ¬èªç‰ˆ",
  "processed_at": "2025-11-27T14:30:22",
  "row_count": 987,
  "original_count": 1000,
  "removed_count": 13,
  "config": {
    "dataset_type": "wikipedia_ja",
    "options": {},
    "remove_short_text": true,
    "min_length": 100,
    "remove_duplicates": true
  }
}
```

### 8.2 ä¿å­˜å…ˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª

**OUTPUTãƒ•ã‚©ãƒ«ãƒ€ï¼ˆæœ€çµ‚å‡ºåŠ›ï¼‰**:
```
OUTPUT/
â”œâ”€â”€ preprocessed_{dataset_type}.csv
â”œâ”€â”€ {dataset_type}.txt
â””â”€â”€ metadata_{dataset_type}.json
```

**datasetsãƒ•ã‚©ãƒ«ãƒ€ï¼ˆä¸­é–“ãƒ•ã‚¡ã‚¤ãƒ«ãƒ»HuggingFaceãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ï¼‰**:
```
datasets/
â”œâ”€â”€ {dataset_name}_{split}_{size}_{timestamp}.csv
â”œâ”€â”€ {dataset_name}_{split}_{size}_{timestamp}_metadata.json
â”œâ”€â”€ ldcc-20140209.tar.gz          # Livedoor tar.gz
â””â”€â”€ livedoor/
    â””â”€â”€ text/
        â”œâ”€â”€ dokujo-tsushin/
        â”œâ”€â”€ it-life-hack/
        â””â”€â”€ ...
```

### 8.3 å‡¦ç†ã‚µãƒãƒªãƒ¼

Tab4ã§è¡¨ç¤ºã•ã‚Œã‚‹çµ±è¨ˆ:
- å‡¦ç†ä»¶æ•°
- é™¤å¤–ä»¶æ•°
- æ®‹å­˜ç‡ï¼ˆ%ï¼‰

---

## 9. ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

### 9.1 HuggingFaceã‚¨ãƒ©ãƒ¼

| ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ | åŸå›  | è§£æ±ºç­– |
|----------------|------|--------|
| "Dataset scripts are no longer supported" | ã‚¹ã‚¯ãƒªãƒ—ãƒˆãƒ™ãƒ¼ã‚¹ã®ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆãŒå»ƒæ­¢ | å‹•ä½œç¢ºèªæ¸ˆã¿ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‚’ä½¿ç”¨ |
| "doesn't exist on the Hub" | ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆåãŒé–“é•ã£ã¦ã„ã‚‹ | HuggingFace Hubã§ç¢ºèª |

### 9.2 å…±é€šã‚¨ãƒ©ãƒ¼å¯¾ç­–

| å•é¡Œ | åŸå›  | è§£æ±ºç­– |
|-----|------|--------|
| ãƒ¡ãƒ¢ãƒªä¸è¶³ | å¤§è¦æ¨¡ãƒ‡ãƒ¼ã‚¿ã®ä¸€æ‹¬èª­ã¿è¾¼ã¿ | ã‚µãƒ³ãƒ—ãƒ«æ•°ã‚’æ¸›ã‚‰ã™ |
| ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ä¸ä¸€è‡´ | æƒ³å®šã‚«ãƒ©ãƒ ãŒå­˜åœ¨ã—ãªã„ | text_field/title_fieldã‚’ç¢ºèª |
| tarè§£å‡ã‚¨ãƒ©ãƒ¼ | ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ•ã‚£ãƒ«ã‚¿ | filter='data'ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ä½¿ç”¨ |

### 9.3 Streamlitè¨­å®šã‚¨ãƒ©ãƒ¼

```python
try:
    st.set_page_config(...)
except st.errors.StreamlitAPIException:
    pass  # æ—¢ã«è¨­å®šæ¸ˆã¿ã®å ´åˆã¯ã‚¹ã‚­ãƒƒãƒ—
```

---

## 10. æ‹¡å¼µå€™è£œãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆ

å°†æ¥å¯¾å¿œã‚’æ¤œè¨ã—ã¦ã„ã‚‹ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆä¸€è¦§ã€‚

### 10.1 ã‚µã‚¤ã‚¨ãƒ³ã‚¹ãƒ»AIåˆ†é‡

#### arXivè«–æ–‡ ğŸ“„
```python
{
    "hf_dataset": "arxiv_dataset",
    "text_field": "abstract",
    "title_field": "title",
    "categories": ["cs.AI", "cs.LG", "cs.CL", "cs.CV", "stat.ML"]
}
```

#### Scientific Papers ğŸ”¬
```python
{
    "hf_dataset": "scientific_papers",
    "hf_config": "arxiv",  # ã¾ãŸã¯ "pubmed"
    "text_field": "article",
    "title_field": "abstract"
}
```

### 10.2 ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°åˆ†é‡

#### CodeSearchNet ğŸ’»
```python
{
    "hf_dataset": "code_search_net",
    "hf_config": "python",  # python, java, go, php, javascript, ruby
    "text_field": "func_documentation_string",
    "title_field": "func_name"
}
```

#### The Stack ğŸ™
```python
{
    "hf_dataset": "bigcode/the-stack",
    "hf_config": "python",
    "text_field": "content",
    "title_field": "path"
}
```

### 10.3 ãã®ä»–

#### Stack Overflow â“
```python
{
    "hf_dataset": "pacovaldez/stackoverflow-questions",
    "text_field": "body",
    "title_field": "title"
}
```

#### Wikipediaè‹±èªç‰ˆ ğŸŒ
```python
{
    "hf_dataset": "wikimedia/wikipedia",
    "hf_config": "20231101.en",
    "text_field": "text",
    "title_field": "title"
}
```

---

## ä»˜éŒ²: ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆè¿½åŠ æ‰‹é †

### A.1 DATASET_CONFIGSã«è¿½åŠ 

```python
"æ–°ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆ": {
    "name": "è¡¨ç¤ºå",
    "icon": "ğŸ“„",
    "required_columns": ["å¿…é ˆã‚«ãƒ©ãƒ "],
    "description": "èª¬æ˜",
    "hf_dataset": "HuggingFaceãƒ‘ã‚¹",
    "hf_config": "Configå",
    "split": "train",
    "streaming": True,
    "text_field": "ãƒ†ã‚­ã‚¹ãƒˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰",
    "title_field": "ã‚¿ã‚¤ãƒˆãƒ«ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰",
    "sample_size": 1000
}
```

### A.2 æ¤œè¨¼é–¢æ•°ã®è¿½åŠ ï¼ˆæ¨å¥¨ï¼‰

```python
def validate_æ–°ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆ_specific(df: pd.DataFrame) -> List[str]:
    """æ–°ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆç‰¹æœ‰ã®æ¤œè¨¼"""
    issues = []

    # ãƒ†ã‚­ã‚¹ãƒˆé•·åˆ†æ
    if 'text_field' in df.columns:
        text_lengths = df['text_field'].str.len()
        issues.append(f"ğŸ“Š å¹³å‡é•·: {text_lengths.mean():.0f}æ–‡å­—")

    # å›ºæœ‰ã®ãƒã‚§ãƒƒã‚¯
    # ...

    return issues
```

### A.3 Tab2ã®æ¤œè¨¼åˆ†å²ã«è¿½åŠ 

```python
elif selected_dataset == "æ–°ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆ":
    specific_issues = validate_æ–°ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆ_specific(df)
```